<style>
  #pixelArt {
    margin: 0 auto;
    width: 100%;
    height: 256px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
</style>
<div id="pixelArt"></div>
<script>
  const FIXED_HEIGHT = 256;
  const GRID_SIZE = 20; // Size of each grid cell

  function generateArt() {
    const container = document.getElementById('pixelArt');
    const canvas = document.createElement('canvas');
    canvas.width = container.offsetWidth;
    canvas.height = FIXED_HEIGHT;
    const ctx = canvas.getContext('2d');

    const palette = generatePalette();

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawShapes(ctx, palette, canvas.width);

    container.style.backgroundImage = `url(${canvas.toDataURL()})`;
  }

  function generatePalette() {
    const baseHue = Math.random() * 360;
    return [
      `hsla(${baseHue}, 10%, 50%, 0.8)`,
      `hsla(${(baseHue + 30) % 360}, 60%, 60%, 0.8)`,
      `hsla(${(baseHue + 60) % 360}, 50%, 70%, 0.8)`,
      `hsla(${(baseHue + 180) % 360}, 40%, 30%, 0.8)`,
      `hsla(${(baseHue + 210) % 360}, 35%, 25%, 0.8)`
    ];
  }

  function drawShapes(ctx, palette, width) {
    const gridWidth = Math.floor(width / GRID_SIZE);
    const gridHeight = Math.floor(FIXED_HEIGHT / GRID_SIZE);

    for (let x = 0; x < gridWidth; x++) {
      for (let y = 0; y < gridHeight; y++) {
        if (Math.random() < 0.7) { // 70% chance to draw a shape in each cell
          const shapeType = Math.random();
          ctx.fillStyle = palette[Math.floor(Math.random() * palette.length)];

          const cellX = x * GRID_SIZE;
          const cellY = y * GRID_SIZE;

          if (shapeType < 0.25) {
            drawTriangle(ctx, cellX, cellY);
          } else if (shapeType < 0.5) {
            drawCircle(ctx, cellX, cellY);
          } else if (shapeType < 0.75) {
            drawSquare(ctx, cellX, cellY);
          } else {
            drawStar(ctx, cellX, cellY);
          }
        }
      }
    }
  }

  function drawTriangle(ctx, x, y) {
    const size = GRID_SIZE * 0.8;
    ctx.beginPath();
    ctx.moveTo(x + GRID_SIZE / 2, y);
    ctx.lineTo(x, y + size);
    ctx.lineTo(x + size, y + size);
    ctx.closePath();
    ctx.fill();
  }

  function drawCircle(ctx, x, y) {
    const radius = GRID_SIZE * 0.4;
    ctx.beginPath();
    ctx.arc(x + GRID_SIZE / 2, y + GRID_SIZE / 2, radius, 0, Math.PI * 2);
    ctx.fill();
  }

  function drawSquare(ctx, x, y) {
    const size = GRID_SIZE * 0.8;
    ctx.fillRect(x + GRID_SIZE * 0.1, y + GRID_SIZE * 0.1, size, size);
  }

  function drawStar(ctx, x, y) {
    const outerRadius = GRID_SIZE * 0.4;
    const innerRadius = outerRadius * 0.5;
    const centerX = x + GRID_SIZE / 2;
    const centerY = y + GRID_SIZE / 2;
    const spikes = 5;

    ctx.beginPath();
    for (let i = 0; i < spikes * 2; i++) {
      const radius = i % 2 === 0 ? outerRadius : innerRadius;
      const angle = (i * Math.PI) / spikes;
      ctx.lineTo(
        centerX + Math.cos(angle) * radius,
        centerY + Math.sin(angle) * radius
      );
    }
    ctx.closePath();
    ctx.fill();
  }

  generateArt();
  window.addEventListener('resize', generateArt);
  document.getElementById('pixelArt').addEventListener('click', generateArt);
</script>
